<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="../js/common.js"></script>
    <title>Document</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            height: 100vh;
        }

        .container {
            /* background-color: #41ff51; */
            height: calc(100vh - 60px);
            display: flex;
        }

        .main_body {
            /* background: #9595ff; */
            width: -webkit-fill-available;
            border-radius: 10px;
            margin: 10px;
        }

        .info_dec {
            /* background: #e9e9e9; */
            background-image: url(https://images.pexels.com/photos/7130560/pexels-photo-7130560.jpeg?cs=srgb&dl=pexels-codioful-7130560.jpg&fm=jpg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            border-radius: 10px;
            padding: 20px;
        }

        .info_dec button {
            width: 150px;
            border: oldlace;
            border-radius: 5px;
            padding: 5px;
            margin: 10px;
        }

        #addCourse {
            background: #9b9fff;
            transition: .5s;
            margin-left: 0;
        }

        #addCourse:hover {
            background: #8286ff;
            transition: .5s;
        }

        #generateRoutine {
            background: #82ff65;
            transition: .5s;
        }

        #generateRoutine:hover {
            background: #66d54d;
            transition: .5s;
        }

        .info_group {
            padding: 10px 0;
            display: flex;
            align-items: center;
        }

        .info_group label {
            width: 160px;
        }

        .info_group input[type='number'],
        input[type='search'],
        select {
            width: 300px;
            padding: 5px;
            border: 1px solid #b8b8b8;
            border-radius: 5px;
        }

        .dropdown-list {
            display: none;
            border: 1px solid #b8b8b8;
            max-height: 150px;
            overflow-y: auto;
            position: absolute;
            width: 300px;
            background-color: #fff;
            z-index: 10;
            padding: 5px;
            border-radius: 5px;
            transition: .5s;
        }

        .dropdown-item {
            padding: 8px;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background-color: #f0f0f0;
            border-radius: 5px;
            transition: .5s;
        }

        .custom-dropdown {
            position: relative;
            display: inline-block;
            width: 200px;
        }

        .selected-option {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            background-color: white;
            font-size: 13px;
        }

        .dropdown-list-color {
            display: none;
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            z-index: 1;
            max-height: 200px;
            overflow-y: auto;
        }

        .dropdown-item {
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .dropdown-item:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <!-- navigation bar -->
    <iframe src="template/nav_bar.html" style="border: none; width: 100%; height: 60px; display: block;"></iframe>

    <div class="container">
        <!-- side bar -->
        <iframe src="template/side_bar.html" class="side_bar" id="sidebar"
            style="border: none; width: 250px; margin: 10px 0 10px 10px; display: none;"></iframe>

        <div class="main_body">
            <div class="info_dec">
                <h3 style="text-align: center; margin-top: 0;">Your Advising Preferences</h3>

                <div class="info_group">
                    <label for="studentID">Maximum credit</label>
                    <input type="number" id="max_cr" value="10" required>
                </div>
                <div class="info_group">
                    <label for="studentID">Minimum credit</label>
                    <input type="number" id="min_cr" value="6" required>
                </div>
                <div class="info_group">
                    <label for="studentID">Minimum class days</label>
                    <div style="display: flex; align-items: center;">
                        <input type="radio" id="min_cr_6" name="min_cr" value="6" style="margin: 0 5px 0 0;" checked>
                        <label for="min_cr_6" style="margin-right: 30px; width: 0;">6</label>
                        <input type="radio" id="min_cr_4" name="min_cr" value="4" style="margin: 0 5px 0 0;">
                        <label for="min_cr_4" style="margin-right: 30px; width: 0;">4</label>
                        <input type="radio" id="min_cr_2" name="min_cr" value="2" style="margin: 0 5px 0 0;">
                        <label for="min_cr_2" style="margin-right: 30px; width: 0;">2</label>
                    </div>
                </div>
                <div class="selected_courses">
                    <div class="info_group course_selection" style="display: none;">
                        <label for="min_cr">Choose course</label>
                        <div>
                            <input style="width: 312px;" type="search" id="search_box_course" placeholder="Course title"
                                onfocus="filterList()" required>
                            <div id="courseList" class="dropdown-list"></div>
                        </div>
                        <label style="margin-left: 50px; width: 60px;">Credit</label>
                        <select name="credit" style="width: 200px;" required>
                            <option value="1">1</option>
                            <option value="1.5">1.5</option>
                            <option value="3" selected>3</option>
                        </select>
                        <label style="margin-left: 50px; width: 60px;">Color</label>
                        <div class="custom-dropdown">
                            <div class="selected-option" id="selectedColor">
                                <i class="fa fa-square" style="color: rgb(95, 95, 255);"></i> Blue
                            </div>
                            <div class="dropdown-list-color" id="colorList">
                                <div class="dropdown-item" data-color="red">
                                    <i class="fa fa-square" style="color: rgb(255, 99, 99);"></i> Red
                                </div>
                                <div class="dropdown-item" data-color="green">
                                    <i class="fa fa-square" style="color: rgb(91, 255, 91);"></i> Green
                                </div>
                                <div class="dropdown-item" data-color="blue">
                                    <i class="fa fa-square" style="color: rgb(95, 95, 255);"></i> Blue
                                </div>
                                <div class="dropdown-item" data-color="yellow">
                                    <i class="fa fa-square" style="color: yellow;"></i> Yellow
                                </div>
                                <div class="dropdown-item" data-color="orange">
                                    <i class="fa fa-square" style="color: rgb(255, 166, 0);"></i> Orange
                                </div>
                                <div class="dropdown-item" data-color="purple">
                                    <i class="fa fa-square" style="color: rgb(255, 93, 255);"></i> Pink
                                </div>
                                <div class="dropdown-item" data-color="purple">
                                    <i class="fa fa-square" style="color: cyan;"></i> Cyan
                                </div>
                                <div class="dropdown-item" data-color="purple">
                                    <i class="fa fa-square" style="color: rgb(188, 188, 188);"></i> Gray
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; justify-content: flex-start;">
                    <button type="button" id="addCourse">+ Add course</button>
                    <button type="submit" id="generateRoutine">Generate Routine</button>
                </div>
            </div>

        </div>
    </div>

    <!-- dropdown js for color list -->
    <!-- <script>
        const selectedColor = document.getElementById("selectedColor");
        const colorList = document.getElementById("colorList");

        // Toggle the dropdown on click
        selectedColor.addEventListener("click", () => {
            colorList.style.display = colorList.style.display === "block" ? "none" : "block";
        });

        // Hide dropdown when clicking outside
        document.addEventListener("click", (event) => {
            if (!selectedColor.contains(event.target) && !colorList.contains(event.target)) {
                colorList.style.display = "none"; // Hide the dropdown
            }
        });

        // Set the selected color
        colorList.addEventListener("click", (event) => {
            if (event.target.classList.contains("dropdown-item")) {
                selectedColor.innerHTML = event.target.innerHTML;
                selectedColor.style.color = 'black';
                colorList.style.display = "none"; // Hide dropdown
            }
        });

    </script> -->

    <!-- dropdown js for course list -->
    <!-- <script>

        function filterList() {
            const input = document.getElementById("search_box_course");
            const listContainer = document.getElementById("courseList");

            const filter = input.value.toLowerCase();

            listContainer.style.display = "block";
            listContainer.innerHTML = "";

            courses
                .filter(course => course.toLowerCase().includes(filter))
                .forEach(course => {
                    const option = document.createElement("div");
                    option.classList.add("dropdown-item");
                    option.textContent = course;
                    option.onclick = () => {
                        input.value = course;
                        listContainer.innerHTML = "";
                        listContainer.style.display = "none";
                    };
                    listContainer.appendChild(option);
                });
        }

        document.addEventListener("click", (event) => {
            const input = document.getElementById("search_box_course");
            const listContainer = document.getElementById("courseList");

            if (!input.contains(event.target) && !listContainer.contains(event.target)) {
                listContainer.style.display = "none";
            }
        });

        const searchBox = document.getElementById("search_box_course");
        searchBox.addEventListener("focus", filterList);
        searchBox.addEventListener("input", filterList);
    </script> -->
    
    <script>
        const courses = ["MAT101", "CSE110", "PHY111", "ENG102", "BIO105"]; // List of course options
        
        document.getElementById("addCourse").addEventListener("click", () => {
            const originalCourseSelection = document.querySelector(".course_selection");
            const newCourseSelection = originalCourseSelection.cloneNode(true);

            newCourseSelection.querySelector("#search_box_course").value = "";
            newCourseSelection.querySelector("#selectedColor").innerHTML = "<i class=\"fa fa-square\" style=\"color: rgb(95, 95, 255);\"></i> Blue";

            const uniqueID = Date.now();
            newCourseSelection.querySelector("#search_box_course").id = `search_box_course_${uniqueID}`;
            newCourseSelection.querySelector("#courseList").id = `courseList_${uniqueID}`;
            newCourseSelection.querySelector("#selectedColor").id = `selectedColor_${uniqueID}`;
            newCourseSelection.querySelector("#colorList").id = `colorList_${uniqueID}`;

            newCourseSelection.style.display = 'flex';
            document.querySelector(".selected_courses").appendChild(newCourseSelection);

            // Color dropdown 
            const selectedColor = newCourseSelection.querySelector(`#selectedColor_${uniqueID}`);
            const colorList = newCourseSelection.querySelector(`#colorList_${uniqueID}`);

            selectedColor.addEventListener("click", () => {
                colorList.style.display = colorList.style.display === "block" ? "none" : "block";
            });

            document.addEventListener("click", (event) => {
                if (!selectedColor.contains(event.target) && !colorList.contains(event.target)) {
                    colorList.style.display = "none";
                }
            });

            colorList.addEventListener("click", (event) => {
                if (event.target.classList.contains("dropdown-item")) {
                    selectedColor.innerHTML = event.target.innerHTML;
                    selectedColor.style.color = 'black';
                    colorList.style.display = "none";
                }
            });

            // Course list dropdown 
            const searchBox = newCourseSelection.querySelector(`#search_box_course_${uniqueID}`);
            const listContainer = newCourseSelection.querySelector(`#courseList_${uniqueID}`);

            function filterList() {
                const filter = searchBox.value.toLowerCase();

                listContainer.style.display = "block";
                listContainer.innerHTML = "";

                courses
                    .filter(course => course.toLowerCase().includes(filter))
                    .forEach(course => {
                        const option = document.createElement("div");
                        option.classList.add("dropdown-item");
                        option.textContent = course;
                        option.onclick = () => {
                            searchBox.value = course;
                            listContainer.innerHTML = "";
                            listContainer.style.display = "none";
                        };
                        listContainer.appendChild(option);
                    });
            }

            searchBox.addEventListener("focus", filterList);
            searchBox.addEventListener("input", filterList);

            document.addEventListener("click", (event) => {
                if (!searchBox.contains(event.target) && !listContainer.contains(event.target)) {
                    listContainer.style.display = "none";
                }
            });
        });

    </script>
</body>

</html>